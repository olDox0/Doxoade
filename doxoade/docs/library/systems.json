{
  "core_arch": {
    "title": "Arquitetura do N√∫cleo",
    "files": ["doxoade/cli.py", "doxoade/shared_tools.py", "doxoade/database.py"],
    "description": "O sistema nervoso central. 'cli.py' gerencia a entrada, 'shared_tools' fornece a verdade universal (logs, git, paths) e 'database' persiste a mem√≥ria."
  },
  "genesis_engine": {
    "title": "Motor G√™nese (IA Simb√≥lica)",
    "files": ["doxoade/learning.py", "doxoade/fixer.py"],
    "description": "O c√©rebro evolutivo. 'learning.py' abstrai padr√µes de corre√ß√£o de diffs e 'fixer.py' aplica essas corre√ß√µes cirurgicamente no c√≥digo."
  },
  "maestro_system": {
    "title": "O Maestro (Orquestra√ß√£o)",
    "files": ["doxoade/commands/maestro.py", "doxoade/commands/moddify.py"],
    "description": "Interpretador DSL. O 'maestro.py' l√™ scripts .dox e o 'moddify.py' atua como o bra√ßo mec√¢nico para editar arquivos em lote."
  },
  "probes_layer": {
    "title": "Camada de Sondas (Probes)",
    "files": ["doxoade/probes/syntax_probe.py", "doxoade/probes/hunter_probe.py", "doxoade/probes/clone_probe.py"],
    "description": "Processos isolados (Sandbox). Analisam c√≥digo perigoso ou inst√°vel sem derrubar o n√∫cleo principal."
  },
  "phoenix_protocols": {
    "title": "Protocolos de Cura (F√™nix)",
    "files": ["doxoade/commands/doctor.py", "doxoade/commands/install.py", "doxoade/commands/rebuild.py"],
    "description": "Ferramentas de resili√™ncia de ambiente. Garantem que o venv e as depend√™ncias estejam saud√°veis."
  },
  "chronos_system": {
    "title": "Sistema Chronos (Telemetria)",
    "files": ["doxoade/chronos.py", "doxoade/commands/timeline.py"],
    "description": "O Guardi√£o do Tempo. Grava cada comando executado e cada arquivo modificado pelo Doxoade no banco de dados, permitindo auditoria e revers√£o futura."
  },
  "sapiens_search": {
    "title": "Sistema Sapiens Search",
    "date": "2025-12-07",
    "content": "## O Problema\n\nEm projetos com centenas de fun√ß√µes, encontrar:\n- Onde uma fun√ß√£o √© usada\n- Quem chama determinada fun√ß√£o\n- Coment√°rios relacionados a um conceito\n- C√≥digo que implementa uma feature\n\n√â como procurar agulha no palheiro.\n\n## A Solu√ß√£o\n\nO **Sapiens Search** indexa todo o c√≥digo usando AST e oferece busca inteligente com:\n\n### Recursos\n\n**Busca de Fun√ß√µes**\n```bash\ndoxoade search \"logger\" --function\n```\nEncontra fun√ß√µes por nome ou docstring.\n\n**Call Graph**\n```bash\ndoxoade search \"_log_execution\" --callers\n```\nMostra quem chama a fun√ß√£o (depend√™ncias invertidas).\n\n**Fuzzy Matching**\n```bash\ndoxoade search \"excution\" --fuzzy\n```\nCorrige typos automaticamente (`excution` ‚Üí `execution`).\n\n**Normaliza√ß√£o**\n```bash\ndoxoade search \"post-mortems\"\n```\nEncontra tamb√©m: `postmortems`, `post_mortems`, `POSTMORTEMS`.\n\n## Arquitetura\n\n### Indexa√ß√£o (CodeIndexer)\nVarre todos os `.py` e extrai:\n- Defini√ß√µes de fun√ß√µes/classes (via AST)\n- Grafo de chamadas (quem chama quem)\n- Coment√°rios (linhas com `#`)\n- Docstrings\n\n### Matching (TextMatcher)\n- Normaliza termos (h√≠fens, underscores)\n- Fuzzy matching via `SequenceMatcher`\n- Mapa de sin√¥nimos (`db` ‚Üí `database`)\n\n### Busca\nCombina m√∫ltiplas estrat√©gias:\n1. Match exato no nome\n2. Match na docstring\n3. Match em coment√°rios\n4. Fuzzy match (se `--fuzzy`)\n\n## Filosofia MPoT\n\n**Fun√ß√µes Pequenas**\n- Todas < 60 linhas\n- Uma responsabilidade cada\n\n**Fail Loudly**\n- Erros de sintaxe s√£o esperados (ignora arquivo)\n- Outros erros s√£o reportados\n\n**Single Responsibility**\n- `CodeIndexer`: indexa\n- `TextMatcher`: compara\n- `search()`: orquestra\n\n## Roadmap\n\n### Fase 1: MVP ‚úÖ\n- Indexa√ß√£o b√°sica\n- Busca em fun√ß√µes/coment√°rios\n- Call graph\n- Fuzzy matching\n\n### Fase 2: üöß\n- Busca em c√≥digo raw\n- Cache persistente (SQLite)\n- Integra√ß√£o com Git (busca em commits)\n\n### Fase 3: üîÆ\n- Busca sem√¢ntica\n- Sugest√µes de refatora√ß√£o\n- Aprendizado com G√™nese\n\n## Exemplos Pr√°ticos\n\n**Debugging**\n```bash\n# \"Onde uso subprocess.run?\"\ndoxoade search \"subprocess.run\" --code\n```\n\n**Refatora√ß√£o**\n```bash\n# \"Quem depende desta fun√ß√£o?\"\ndoxoade search \"_get_config\" --callers\n```\n\n**Documenta√ß√£o**\n```bash\n# \"Fun√ß√µes relacionadas a logging\"\ndoxoade search \"log\" --function\n```\n\n## Limita√ß√µes Atuais\n\n1. Sem cache (re-indexa sempre)\n2. N√£o rastreia imports externos\n3. N√£o diferencia m√©todos de fun√ß√µes\n4. Busca em c√≥digo n√£o implementada\n\n## Performance\n\n| Arquivos | Tempo de Indexa√ß√£o |\n|----------|-----------------|\n| 50       | ~0.5s          |\n| 200      | ~2s            |\n| 1000     | ~10s           |\n\n**Nota:** Fase 2 incluir√° cache para evitar re-indexa√ß√£o."
  }
}